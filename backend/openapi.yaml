openapi: 3.0.3
info:
  title: FAITEL Backend API
  version: 0.1.0
servers:
  - url: http://localhost:8080
paths:
  /health:
    get:
      responses:
        '200':
          description: OK
  /auth/login:
    post:
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                password:
                  type: string
      responses:
        '200':
          description: Login
  /tenants:
    get:
      responses:
        '200':
          description: Tenants
  /courses:
    get:
      parameters:
        - in: query
          name: tenant_id
          schema:
            type: string
        - in: query
          name: is_active
          schema:
            type: string
      responses:
        '200':
          description: Courses
    post:
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                tenant_id:
                  type: string
                title:
                  type: string
                description:
                  type: string
                duration_months:
                  type: integer
                total_hours:
                  type: integer
                monthly_price:
                  type: number
                modality:
                  type: string
                thumbnail_url:
                  type: string
                is_active:
                  type: boolean
      responses:
        '200':
          description: Created
  /courses/{id}:
    patch:
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Updated
    delete:
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Deleted
  /modules:
    get:
      parameters:
        - in: query
          name: course_id
          schema:
            type: string
        - in: query
          name: subject_id
          schema:
            type: string
      responses:
        '200':
          description: Modules
  /modules/{id}:
    get:
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Module
    post:
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                course_id:
                  type: string
                subject_id:
                  type: string
                title:
                  type: string
                description:
                  type: string
                order_index:
                  type: integer
      responses:
        '200':
          description: Created
  /modules/{id}:
    patch:
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Updated
    delete:
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Deleted
  /subjects:
    get:
      parameters:
        - in: query
          name: course_id
          schema:
            type: string
      responses:
        '200':
          description: Subjects
    post:
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                course_id:
                  type: string
                title:
                  type: string
                order:
                  type: integer
      responses:
        '200':
          description: Created
  /subjects/{id}:
    get:
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Subject
  /contents:
    get:
      parameters:
        - in: query
          name: module_id
          schema:
            type: string
      responses:
        '200':
          description: Contents
    post:
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                module_id:
                  type: string
                content_type:
                  type: string
                title:
                  type: string
                url:
                  type: string
                order:
                  type: integer
                is_required:
                  type: boolean
                duration_minutes:
                  type: integer
                payload:
                  type: object
      responses:
        '200':
          description: Created
  /contents/{id}:
    patch:
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Updated
    delete:
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Deleted
  /content-progress:
    get:
      parameters:
        - in: query
          name: student_id
          schema:
            type: string
        - in: query
          name: course_id
          schema:
            type: string
      responses:
        '200':
          description: Content progress
    post:
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                student_id:
                  type: string
                content_id:
                  type: string
                completed:
                  type: boolean
      responses:
        '200':
          description: Created
  /content-progress/{id}:
    patch:
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Updated
  /enrollments:
    get:
      parameters:
        - in: query
          name: student_id
          schema:
            type: string
        - in: query
          name: course_id
          schema:
            type: string
      responses:
        '200':
          description: Enrollments
    post:
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                student_id:
                  type: string
                course_id:
                  type: string
                is_active:
                  type: boolean
      responses:
        '200':
          description: Created
  /enrollments/{id}:
    delete:
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Deleted
  /stats/admin-dashboard:
    get:
      summary: Admin Dashboard Statistics
      parameters:
        - in: query
          name: polo_id
          schema:
            type: string
        - in: query
          name: nucleo_id
          schema:
            type: string
      responses:
        '200':
          description: Dashboard statistics
          content:
            application/json:
              schema:
                type: object
                properties:
                  total_students:
                    type: integer
                  total_courses:
                    type: integer
                  active_enrollments:
                    type: integer
                  pending_payments:
                    type: integer
                  total_revenue:
                    type: number
                  new_students_this_month:
                    type: integer
                  completion_rate:
                    type: number
  /stats/course/{id}:
    get:
      summary: Course Statistics
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Course statistics
          content:
            application/json:
              schema:
                type: object
                properties:
                  course_id:
                    type: string
                  total_enrolled:
                    type: integer
                  active_students:
                    type: integer
                  completion_rate:
                    type: number
                  average_grade:
                    type: number
                  total_modules:
                    type: integer
                  dropout_rate:
                    type: number
  /stats/professor/{id}:
    get:
      summary: Professor Statistics
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Professor statistics
          content:
            application/json:
              schema:
                type: object
                properties:
                  professor_id:
                    type: string
                  courses_teaching:
                    type: integer
                  total_students:
                    type: integer
                  average_student_grade:
                    type: number
                  pending_exams:
                    type: integer
  /stats/system:
    get:
      summary: System Statistics (SuperAdmin)
      responses:
        '200':
          description: System-wide statistics
          content:
            application/json:
              schema:
                type: object
                properties:
                  total_users:
                    type: integer
                  total_polos:
                    type: integer
                  total_nucleos:
                    type: integer
                  total_courses:
                    type: integer
                  active_enrollments:
                    type: integer
                  system_health:
                    type: string
                  database_size_mb:
                    type: number
  /stats/enrollments-trend:
    get:
      summary: Enrollment Trends
      parameters:
        - in: query
          name: days
          schema:
            type: integer
            default: 30
        - in: query
          name: polo_id
          schema:
            type: string
      responses:
        '200':
          description: Enrollment trend data
          content:
            application/json:
              schema:
                type: object
                properties:
                  trend:
                    type: array
                    items:
                      type: object
                      properties:
                        date:
                          type: string
                        count:
                          type: integer
                  total_period:
                    type: integer
                  growth_percentage:
                    type: number
